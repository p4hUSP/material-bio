



<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Material para cursos de programação e análise de dados">
      
      
        <link rel="canonical" href="https://p4husp.github.io/material-bio/02_estruturar/">
      
      
        <meta name="author" content="P4H">
      
      
        <meta name="lang:clipboard.copy" content="Copiar para área de transferência">
      
        <meta name="lang:clipboard.copied" content="Copiado para área de transferência">
      
        <meta name="lang:search.language" content="en, pt">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="Nenhum resultado encontrado">
      
        <meta name="lang:search.result.one" content="1 resultado encontrado">
      
        <meta name="lang:search.result.other" content="# resultados encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Estruturando Banco - P4H - Material</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#estruturando-banco" tabindex="1" class="md-skip">
        Ir para o conteúdo
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://p4husp.github.io/material-bio/" title="P4H - Material" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              P4H - Material
            </span>
            <span class="md-header-nav__topic">
              
                Estruturando Banco
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Digite para iniciar a busca
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/p4hUSP/material-bio/" title="Ir ao repositório" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    p4husp/material-bio
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://p4husp.github.io/material-bio/" title="P4H - Material" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    P4H - Material
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/p4hUSP/material-bio/" title="Ir ao repositório" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    p4husp/material-bio
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Material" class="md-nav__link">
      Material
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../01_introducao/" title="Introdução ao R" class="md-nav__link">
      Introdução ao R
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Estruturando Banco
      </label>
    
    <a href="./" title="Estruturando Banco" class="md-nav__link md-nav__link--active">
      Estruturando Banco
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Índice</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-tidyr" title="1. tidyr" class="md-nav__link">
    1. tidyr
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-separate" title="1.1 separate()" class="md-nav__link">
    1.1 separate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-aplicando-no-nosso-banco" title="1.1.1. Aplicando no nosso banco" class="md-nav__link">
    1.1.1. Aplicando no nosso banco
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-unite" title="1.2. unite" class="md-nav__link">
    1.2. unite
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-aplicando-no-nosso-banco" title="1.2.1. Aplicando no nosso banco" class="md-nav__link">
    1.2.1. Aplicando no nosso banco
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-exercicios-parte-1" title="2. Exercícios - Parte 1" class="md-nav__link">
    2. Exercícios - Parte 1
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-exercicio-exemplos-de-unite-e-separate" title="2.1. Exercício - Exemplos de unite e separate" class="md-nav__link">
    2.1. Exercício - Exemplos de unite e separate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-gather-e-spread" title="3. Gather e Spread" class="md-nav__link">
    3. Gather e Spread
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-gather" title="3.1. gather()" class="md-nav__link">
    3.1. gather()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-aplicando" title="3.1.1. Aplicando" class="md-nav__link">
    3.1.1. Aplicando
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-spread" title="3.2. spread()" class="md-nav__link">
    3.2. spread()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-aplicando-no-nosso-banco" title="3.2.1. Aplicando no nosso banco" class="md-nav__link">
    3.2.1. Aplicando no nosso banco
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-exercicios-parte-2" title="4. Exercícios - Parte 2" class="md-nav__link">
    4. Exercícios - Parte 2
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-exercicio-spread" title="4.1. Exercício - spread()" class="md-nav__link">
    4.1. Exercício - spread()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-exercicio-gather" title="4.2. Exercício - gather()" class="md-nav__link">
    4.2. Exercício - gather()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-dplyr" title="4. dplyr" class="md-nav__link">
    4. dplyr
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-select" title="4.1. select()" class="md-nav__link">
    4.1. select()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-filter" title="4.2. filter()" class="md-nav__link">
    4.2. filter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-mutate" title="4.3. mutate()" class="md-nav__link">
    4.3. mutate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../03_transformar/" title="Transformando Dados" class="md-nav__link">
      Transformando Dados
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../04_visualizacao/" title="Visualização" class="md-nav__link">
      Visualização
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Índice</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-tidyr" title="1. tidyr" class="md-nav__link">
    1. tidyr
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-separate" title="1.1 separate()" class="md-nav__link">
    1.1 separate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-aplicando-no-nosso-banco" title="1.1.1. Aplicando no nosso banco" class="md-nav__link">
    1.1.1. Aplicando no nosso banco
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-unite" title="1.2. unite" class="md-nav__link">
    1.2. unite
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-aplicando-no-nosso-banco" title="1.2.1. Aplicando no nosso banco" class="md-nav__link">
    1.2.1. Aplicando no nosso banco
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-exercicios-parte-1" title="2. Exercícios - Parte 1" class="md-nav__link">
    2. Exercícios - Parte 1
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-exercicio-exemplos-de-unite-e-separate" title="2.1. Exercício - Exemplos de unite e separate" class="md-nav__link">
    2.1. Exercício - Exemplos de unite e separate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-gather-e-spread" title="3. Gather e Spread" class="md-nav__link">
    3. Gather e Spread
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-gather" title="3.1. gather()" class="md-nav__link">
    3.1. gather()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-aplicando" title="3.1.1. Aplicando" class="md-nav__link">
    3.1.1. Aplicando
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-spread" title="3.2. spread()" class="md-nav__link">
    3.2. spread()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-aplicando-no-nosso-banco" title="3.2.1. Aplicando no nosso banco" class="md-nav__link">
    3.2.1. Aplicando no nosso banco
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-exercicios-parte-2" title="4. Exercícios - Parte 2" class="md-nav__link">
    4. Exercícios - Parte 2
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-exercicio-spread" title="4.1. Exercício - spread()" class="md-nav__link">
    4.1. Exercício - spread()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-exercicio-gather" title="4.2. Exercício - gather()" class="md-nav__link">
    4.2. Exercício - gather()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-dplyr" title="4. dplyr" class="md-nav__link">
    4. dplyr
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-select" title="4.1. select()" class="md-nav__link">
    4.1. select()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-filter" title="4.2. filter()" class="md-nav__link">
    4.2. filter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-mutate" title="4.3. mutate()" class="md-nav__link">
    4.3. mutate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/p4hUSP/material-bio/edit/master/docs/02_estruturar.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="estruturando-banco">Estruturando Banco<a class="headerlink" href="#estruturando-banco" title="Permanent link">&para;</a></h1>
<p>Hoje, vamos trabalhar com um banco de dados sobre <em>doenças cardíacas</em>. O
dado está disponível <a href="https://archive.ics.uci.edu/ml/datasets/Heart+Disease">UCI - Machine Learning
Repository</a> e no
<a href="https://www.kaggle.com/ronitf/heart-disease-uci/downloads/heart-disease-uci.zip/1">Kaggle</a>.
Os responsáveis pelo estudo foram as seguintes entidades:</p>
<ol>
<li>Hungarian Institute of Cardiology. Budapest: Andras Janosi, M.D.</li>
<li>University Hospital, Zurich, Switzerland: William Steinbrunn, M.D.</li>
<li>University Hospital, Basel, Switzerland: Matthias Pfisterer, M.D.</li>
<li>V.A. Medical Center, Long Beach and Cleveland Clinic Foundation:
    Robert Detrano, M.D., Ph.D.</li>
</ol>
<p>A diagnóstico de doença cardíaca foi feita a partir de uma angiografia.
Se houvesse estreitamento maior do que 50% para pelo menos um vaso
sanguíneo principal, o paciente foi classificado como portador de doença
cardíaca. Caso contrário, o paciente não foi diagnosticado com a doença.</p>
<table>
<thead>
<tr class="header">
<th>Variável</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age_sex</td>
<td>Idade - Sexo</td>
</tr>
<tr class="even">
<td>cp</td>
<td>Tipo de dor no peito</td>
</tr>
<tr class="odd">
<td>trestbps</td>
<td>Pressão sanguínea (mm Hg) em descanso</td>
</tr>
<tr class="even">
<td>chol</td>
<td>Colesterol (mg/dl)</td>
</tr>
<tr class="odd">
<td>fbs</td>
<td>Açúcar no sangue em jejum maior do que 120mg/dl (1 = Sim, 0 = Não)</td>
</tr>
<tr class="even">
<td>restecg</td>
<td>Resultados eletrocardiográficos em repouso</td>
</tr>
<tr class="odd">
<td>thalach</td>
<td>Maior ritmo cardíaco atingido</td>
</tr>
<tr class="even">
<td>exang</td>
<td>Angina induzida por exercício</td>
</tr>
<tr class="odd">
<td>ca</td>
<td>Número de vasos principais coloridos por <em>flourosopy</em></td>
</tr>
<tr class="even">
<td>target</td>
<td>Diagnóstico de doença cardíaca (1 = Sim, 0 = Não)</td>
</tr>
</tbody>
</table>

<p>Vamos começar, então?</p>
<ul>
<li><a href="https://github.com/p4hUSP/material-bio/raw/master/docs/data/heart_modificado.xlsx">Download do
    Banco</a></li>
</ul>
<p>O banco hoje está em formato Excel. Você sabe qual função e pacote
utilizamos para abrir esse arquivo?</p>
<div class="codehilite"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="o">&lt;</span><span class="n">pacote</span><span class="o">&gt;</span><span class="p">)</span>

<span class="n">banco</span> <span class="o">&lt;-</span> <span class="o">&lt;</span><span class="n">funcao</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">caminho_do_arquivo</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<h2 id="1-tidyr">1. tidyr<a class="headerlink" href="#1-tidyr" title="Permanent link">&para;</a></h2>
<p>O <code class="codehilite"><span class="n">tidyr</span></code> é o pacote utilizado para estruturar os nossos bancos de
dados. Em geral, ele pode ser utilizado para <strong>unir</strong> (<code class="codehilite"><span class="n">unite</span></code>) e
<strong>separar</strong> (<code class="codehilite"><span class="n">separate</span></code>) colunas ou para <strong>derreter</strong> (<code class="codehilite"><span class="n">gather</span></code>) e
<strong>esticar</strong> (<code class="codehilite"><span class="n">spread</span></code>) as colunas.</p>
<p>Esse pacote é construído com base no conceito de <code class="codehilite"><span class="n">tidy</span> <span class="k">data</span></code>. Deixar os
seus dados <code class="codehilite"><span class="n">tidy</span></code> significa transformar a <strong>estrutura</strong> deles de tal
maneira que tenhamos observações nas linhas, variáveis nas colunas e
valores nas células. Em geral, esperamos também que um banco <code class="codehilite"><span class="n">tidy</span></code>
contenha apenas uma unidade de observação, granularidade, etc.</p>
<div class="admonition question">
<p class="admonition-title"> O que é unidade de observação / granularidade? </p>
<p>Trata-se da unidade contida nas linhas do seu banco. Por exemplo, se montarmos um banco de dados com 
informações sobre <strong>pessoas</strong> (altura, idade, peso, etc.) em cada linha teremos <strong>pessoas</strong> como unidade de 
observação.
Qual a unidade de observação do nosso banco?</p>
</div>
<h3 id="11-separate">1.1 separate()<a class="headerlink" href="#11-separate" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title"> Instalando pacotes </p>
<p>Caso você não tenha o <code class="codehilite"><span class="n">tidyr</span></code> ou o <code class="codehilite"><span class="n">tibble</span></code>no seu computador, por favor, execute o código <code class="codehilite"><span class="n">install</span><span class="p">.</span><span class="n">packages</span><span class="p">(</span><span class="k">c</span><span class="p">(</span><span class="s1">&#39;tidyr&#39;</span><span class="p">,</span> <span class="s1">&#39;tibble&#39;</span><span class="p">))</span></code>.</p>
</div>
<p><code class="codehilite"><span class="n">separate</span><span class="p">()</span></code> é uma função do pacote <code class="codehilite"><span class="n">tidyr</span></code> que tem como objetivo
<strong>separar</strong> valores contidos em uma coluna. Às vezes, mais de uma
informação é agrupado dentro da mesma variável. Repare no exemplo
abaixo.</p>
<div class="codehilite"><pre><span></span><span class="n">exemplo_separete</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span> <span class="n">CIDADE</span> <span class="p">,</span> <span class="o">~</span><span class="n">MORTALIDADE</span><span class="p">,</span>
  <span class="s">&#39;São José dos Campos - SP&#39;</span><span class="p">,</span> <span class="m">80</span><span class="p">,</span>
  <span class="s">&#39;Porto Alegre - RS&#39;</span><span class="p">,</span> <span class="m">100</span><span class="p">,</span>
  <span class="s">&#39;Brasília - DF&#39;</span><span class="p">,</span> <span class="m">81</span>
<span class="p">)</span>

<span class="n">exemplo_separete</span>
</pre></div>


<p>Qual variável contém mais de uma informação? Por mais que talvez você
tenha o costume de agrupar a sua cidade à unidade federativa dela, esses
dois valores dizem respeito a qualidades diferentes da nossa obervação.
Imagine que o banco se estendesse para todas as cidades brasileiras.
Como faríamos para identificar as unidades federativas com maior média
de mortalidade?</p>
<p>Como aplicar a função <code class="codehilite"><span class="n">separate</span><span class="p">()</span></code>? Antes de tudo, tente executar o
comando <code class="codehilite"><span class="o">?</span><span class="n">separate</span></code>. A documentação do <code class="codehilite"><span class="n">tidyr</span></code> tende a ser muito boa e
normalmente teremos uma boa explicação de como a função opera e de quais
parâmetros precisamos utilizar nela.</p>
<p>No caso, o <code class="codehilite"><span class="n">separate</span><span class="p">()</span></code> recebe (1) no primeiro parâmetro o banco de
dados, (2) no segundo, a coluna que desejamos separar, (3) na terceira o
nome das colunas que desejamos criar a partir da coluna informada no
segundo parâmetro, (4) o separador, ou seja, o padrão de caracteres que
serão utilizados para separar a coluna do segundo parâmetro nas colunas
especificadas no terceiro parâmetro. Isso pode parecer complicado, mas é
bem simples.</p>
<div class="codehilite"><pre><span></span><span class="n">separate</span><span class="p">(</span><span class="o">&lt;</span><span class="n">dataframe</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">coluna_que_desejamos_separar</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">vetor_com_as_colunas_a_serem_criadas</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">separador</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>Tente fazer sozinho.</p>
<p><br/></p>
<p><br/></p>
<ul>
<li><strong>Reposta</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">separate</span><span class="p">(</span><span class="n">exemplo_separete</span><span class="p">,</span> <span class="s1">&#39;CIDADE&#39;</span><span class="p">,</span> <span class="k">c</span><span class="p">(</span><span class="s1">&#39;CIDADE&#39;</span><span class="p">,</span> <span class="s1">&#39;UF&#39;</span><span class="p">),</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
</pre></div>


<h4 id="111-aplicando-no-nosso-banco">1.1.1. Aplicando no nosso banco<a class="headerlink" href="#111-aplicando-no-nosso-banco" title="Permanent link">&para;</a></h4>
<p>Você consegue descobrir qual variável no nosso banco tem esse problema?</p>
<div class="admonition question">
<p class="admonition-title"> Funções para explorar dataframes </p>
<p>Tente utilizar funções para explorar o seu dataframe. Por exemplo, com <code class="codehilite"><span class="n">head</span><span class="p">()</span></code> conseguimos obter facilmente
as primeiras linhas do nosso banco.</p>
</div>
<p>Você percebeu alguma coisa de estranho na variável <code class="codehilite"><span class="n">age_sex</span></code>? O que?</p>
<p><code class="codehilite"><span class="n">age_sex</span></code> contém dois tipos de informações diferentes. De um lado, temos
a idade da pessoa. Do outro, temos o sexo dessa pessoa. Novamente,
precisamos separar essas <strong>duas</strong> informações em <strong>duas</strong> variáveis para
que possamos prosseguir com a nossa análise.</p>
<p>Vamos lá? Agora é a sua vez. Como precisamos fazer para separar as duas
variáveis? 💪</p>
<p>PS: Não se preocupe com o <code class="codehilite"><span class="n">remove</span> <span class="o">=</span> <span class="k">FALSE</span></code>. Utilizamos esse parâmetro
apenas para manter a variável antiga e sermos capazes de validar o nosso
resultado.</p>
<div class="codehilite"><pre><span></span><span class="n">separate</span><span class="p">(</span><span class="o">&lt;</span><span class="n">banco</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">variavel</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">vetor</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">sep</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">remove</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">)</span>
</pre></div>


<p>Que tal dar um <code class="codehilite"><span class="k">View</span><span class="p">()</span></code> no seu banco agora?</p>
<div class="codehilite"><pre><span></span><span class="k">View</span><span class="p">(</span><span class="n">banco</span><span class="p">)</span>
</pre></div>


<div class="admonition warning">
<p class="admonition-title"> Salvando alterações </p>
<p>Nunca se esqueça de que o R não sabe que você deseja sobrescrever uma variável. Ao contrário do Stata, por exemplo, as alterações devem ser escritas sobre uma variável com <code class="codehilite"><span class="o">&lt;-</span></code>. Caso contrário, o R irá apenas imprimir no console o resultado.</p>
</div>
<p><br/></p>
<p>Agora, podemos utilizar o <code class="codehilite"><span class="k">View</span><span class="p">()</span></code> ou o <code class="codehilite"><span class="n">head</span><span class="p">()</span></code> para verificar se deu
tudo certo.</p>
<h3 id="12-unite">1.2. <code class="codehilite"><span class="n">unite</span></code><a class="headerlink" href="#12-unite" title="Permanent link">&para;</a></h3>
<p>A função <code class="codehilite"><span class="n">unite</span><span class="p">()</span></code> tem o comportamento inverso <code class="codehilite"><span class="n">separate</span><span class="p">()</span></code>. Nós a
utilizamos para unir valores que fazem mais sentido juntos do que
separados. Repare no exemplo abaixo. O que você faria para obter em uma
única variável uma informação mais precisa?</p>
<div class="codehilite"><pre><span></span><span class="n">exemplo_unite</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">ID</span><span class="p">,</span><span class="o">~</span><span class="n">DIA</span><span class="p">,</span> <span class="o">~</span><span class="n">MES</span><span class="p">,</span> <span class="o">~</span><span class="n">ANO</span><span class="p">,</span> <span class="o">~</span><span class="n">DOSE_REMEDIO</span><span class="p">,</span> <span class="o">~</span><span class="n">RESULTADO</span><span class="p">,</span>
  <span class="m">1</span><span class="p">,</span> <span class="m">14</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">2018</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
  <span class="m">1</span><span class="p">,</span> <span class="m">15</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">2018</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
  <span class="m">2</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">2018</span><span class="p">,</span> <span class="m">1</span> <span class="p">,</span><span class="m">0</span><span class="p">,</span>
  <span class="m">2</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">2018</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
  <span class="m">2</span><span class="p">,</span> <span class="m">11</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">2018</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span>
<span class="p">)</span>

<span class="n">exemplo_unite</span>
</pre></div>


<p>Após executar o código acima, vamos prosseguir com a função <code class="codehilite"><span class="n">unite</span><span class="p">()</span></code>.
Ela recebe (1) no primeiro parâmetro o banco de dados e (2) no segundo o
nome da <strong>nova</strong> variável. Em seguida, (3) adicionamos todas as colunas
que queremos concatenar (4) e, por fim, podemos escolher o separador
entre as colunas.</p>
<div class="codehilite"><pre><span></span><span class="n">unite</span><span class="p">(</span><span class="o">&lt;</span><span class="n">banco</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">nome_da_nova_variavel</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;&lt;separador&gt;&#39;</span><span class="p">)</span>
</pre></div>


<p>Vamos tentar sozinho primeiro?</p>
<p><br/></p>
<p><br/></p>
<ul>
<li><strong>Resposta</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">banco</span> <span class="o">&lt;-</span> <span class="nf">unite</span><span class="p">(</span><span class="n">exemplo_unite</span><span class="p">,</span> <span class="s">&quot;DATA&quot;</span><span class="p">,</span> <span class="n">ANO</span><span class="p">,</span> <span class="n">MES</span><span class="p">,</span> <span class="n">DIA</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&quot;-&quot;</span><span class="p">)</span>
</pre></div>


<p>Verifique o resultado com a função <code class="codehilite"><span class="n">head</span><span class="p">()</span></code>.</p>
<h4 id="121-aplicando-no-nosso-banco">1.2.1. Aplicando no nosso banco<a class="headerlink" href="#121-aplicando-no-nosso-banco" title="Permanent link">&para;</a></h4>
<p>Que tal arrumar, agora, o nosso banco de dados também? Lembre-se que é
possível utilizar a as funções <code class="codehilite"><span class="n">head</span><span class="p">()</span></code>, <code class="codehilite"><span class="n">str</span><span class="p">()</span></code>, entre outras para ter
uma ideia geral da estrutura do nosso <code class="codehilite"><span class="n">dataframe</span></code>.</p>
<p>Provavelmente, você reparou que existem três variáveis que, na verdade,
fornam uma única: <code class="codehilite"><span class="n">birth_day</span></code>, <code class="codehilite"><span class="n">birth_month</span></code> e <code class="codehilite"><span class="n">birth_year</span></code>. Que tal
tentar uni-las com a função <code class="codehilite"><span class="n">separate</span><span class="p">()</span></code>?</p>
<h2 id="2-exercicios-parte-1">2. Exercícios - Parte 1<a class="headerlink" href="#2-exercicios-parte-1" title="Permanent link">&para;</a></h2>
<p>Nós acabamos de aprender a <strong>estruturar</strong> o nosso banco no que diz
respeito a <strong>unir</strong> e <strong>separar</strong> variáveis. Vamos praticar mais um
pouco?</p>
<h3 id="21-exercicio-exemplos-de-unite-e-separate">2.1. Exercício - Exemplos de <code class="codehilite"><span class="n">unite</span></code> e <code class="codehilite"><span class="n">separate</span></code><a class="headerlink" href="#21-exercicio-exemplos-de-unite-e-separate" title="Permanent link">&para;</a></h3>
<p>Para cada tabela abaixo (1) diga se é necessário realizar um <code class="codehilite"><span class="n">unite</span><span class="p">()</span></code>
ou um <code class="codehilite"><span class="n">separate</span><span class="p">()</span></code> e (2) escreva o código que corrija esse problema.</p>
<ul>
<li><strong>Item I</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">ex2_1_1</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">ANO</span><span class="p">,</span> <span class="o">~</span><span class="n">RAZAO_DE_HOMICIDIO</span><span class="p">,</span>
  <span class="m">2014</span><span class="p">,</span> <span class="s">&#39;1200293 / 102000000&#39;</span><span class="p">,</span>
  <span class="m">2015</span><span class="p">,</span> <span class="s">&#39;201992 / 102929222&#39;</span><span class="p">,</span>
  <span class="m">2016</span><span class="p">,</span> <span class="s">&#39;203918 / 175999271&#39;</span><span class="p">,</span>
  <span class="m">2017</span><span class="p">,</span> <span class="s">&#39;2901827 / 228191900&#39;</span><span class="p">,</span>
  <span class="m">2018</span><span class="p">,</span> <span class="s">&#39;201928 / 201928238&#39;</span><span class="p">,</span> 
<span class="p">)</span>
</pre></div>


<ul>
<li><strong>Item II</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="nv">ex_2_1_2</span> <span class="o">&lt;-</span> <span class="nv">tibble</span>::<span class="nv">tribble</span><span class="ss">(</span>
  <span class="o">~</span><span class="nv">NOME</span>, <span class="o">~</span><span class="nv">LOGRADOUR</span>, <span class="o">~</span><span class="nv">NUMERO</span>, <span class="o">~</span><span class="nv">COMPLEMENTO</span>,
  <span class="s1">&#39;</span><span class="s">Lyandra</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">Rua Ademar de Barros</span><span class="s1">&#39;</span>, <span class="mi">20</span>, <span class="s1">&#39;</span><span class="s">APT 28</span><span class="s1">&#39;</span>,
  <span class="s1">&#39;</span><span class="s">Monica</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">Avenida São Pedro</span><span class="s1">&#39;</span>, <span class="mi">30</span>, <span class="s1">&#39;</span><span class="s">BLOCO A</span><span class="s1">&#39;</span>,
  <span class="s1">&#39;</span><span class="s">Luis</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">Rua do Lago</span><span class="s1">&#39;</span>, <span class="mi">22</span>, <span class="s1">&#39;</span><span class="s">Portão do lado esquerdo</span><span class="s1">&#39;</span>,
  <span class="s1">&#39;</span><span class="s">Isaac</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">Avenida Paulista</span><span class="s1">&#39;</span>, <span class="mi">22</span>, <span class="s1">&#39;</span><span class="s">APT 102</span><span class="s1">&#39;</span>,
  <span class="s1">&#39;</span><span class="s">Sônia</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">Rua Brigadeiro</span><span class="s1">&#39;</span>, <span class="mi">982</span>, <span class="s1">&#39;</span><span class="s">APT 283</span><span class="s1">&#39;</span>
<span class="ss">)</span>
</pre></div>


<ul>
<li><strong>Item III</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">ex_2_1_3</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">ID</span><span class="p">,</span> <span class="o">~</span><span class="n">DIA</span><span class="p">,</span> <span class="o">~</span><span class="n">MES</span><span class="p">,</span> <span class="o">~</span><span class="n">ANO</span><span class="p">,</span> <span class="o">~</span><span class="n">ALTURA_PESO</span><span class="p">,</span>
  <span class="m">1</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1998</span><span class="p">,</span> <span class="s">&#39;180 - 340&#39;</span><span class="p">,</span>
  <span class="m">2</span><span class="p">,</span> <span class="m">11</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1998</span><span class="p">,</span> <span class="s">&#39;190 - 200&#39;</span><span class="p">,</span>
  <span class="m">3</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1998</span><span class="p">,</span> <span class="s">&#39;188 - 176&#39;</span><span class="p">,</span>
  <span class="m">2</span><span class="p">,</span> <span class="m">30</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1998</span><span class="p">,</span> <span class="s">&#39;192 - 180&#39;</span>
<span class="p">)</span>
</pre></div>


<p>Parabéns! <img alt="🎉" class="emojione" src="https://cdn.jsdelivr.net/emojione/assets/svg/1f389.svg" title=":tada:" /> <img alt="🎉" class="emojione" src="https://cdn.jsdelivr.net/emojione/assets/svg/1f389.svg" title=":tada:" /> <img alt="🎉" class="emojione" src="https://cdn.jsdelivr.net/emojione/assets/svg/1f389.svg" title=":tada:" /></p>
<h2 id="3-gather-e-spread">3. Gather e Spread<a class="headerlink" href="#3-gather-e-spread" title="Permanent link">&para;</a></h2>
<p>Você já ouviu falar em bancos no formato <code class="codehilite"><span class="n">wide</span></code> e <code class="codehilite"><span class="n">long</span></code>?</p>
<p><center>
<strong>Mortalidade na China e no Brasil - Wide</strong></p>
<p></center>
<center>
<table>
<thead>
<tr class="header">
<th>País</th>
<th>2015</th>
<th>2016</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Brasil</td>
<td>12</td>
<td>12.2</td>
</tr>
<tr class="even">
<td>China</td>
<td>20</td>
<td>30</td>
</tr>
</tbody>
</table></p>
<p></center>
<center>
<strong>Mortalidade na China e no Brasil - Long</strong></p>
<p></center>
<center>
<table>
<thead>
<tr class="header">
<th>País</th>
<th>Ano</th>
<th>Mortalidade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Brasil</td>
<td>2015</td>
<td>12</td>
</tr>
<tr class="even">
<td>Brasil</td>
<td>2016</td>
<td>12.2</td>
</tr>
<tr class="odd">
<td>China</td>
<td>2015</td>
<td>20</td>
</tr>
<tr class="even">
<td>China</td>
<td>2016</td>
<td>30</td>
</tr>
</tbody>
</table></p>
<p></center>
Qual a diferença entre os dois bancos? Quais deles está no formato
<code class="codehilite"><span class="n">tidy</span></code>? Se possível escreva ou tente explicar em voz alta.</p>
<p><br/></p>
<p>Como o primeiro banco não contém apenas uma obervação por linha, ele
<strong>não</strong> é <code class="codehilite"><span class="n">tidy</span></code>. Você concorda que as tomadas de dados sobre
mortalidade sobre dois anos não podem ocorrer simultaneamente no mesmo
ano? Além disso, <code class="codehilite"><span class="mi">2015</span></code> e <code class="codehilite"><span class="mi">2016</span></code> estão ocupando a posição de variáveis,
mas elas na verdade são valores de uma outra variável? Você sabe dizer
qual?</p>
<p>O exemplo de banco <code class="codehilite"><span class="n">tidy</span></code> é o segundo. Nele, temos as variáveis
claramente denominadas no cabeçalho do nosso banco. <code class="codehilite"><span class="n">País</span></code> é uma
variável, assim como <code class="codehilite"><span class="n">Ano</span></code> e <code class="codehilite"><span class="n">Mortalidade</span></code>. E cada linha possui uma
única observação.</p>
<p>Que fique bem claro: <code class="codehilite"><span class="n">tidy</span></code> não é uma definição de qualidade do banco.
Apenas tentamos <em>estruturar</em> a nossa tabela nesse formato porque isso
torna mais fácil a interação com outras funções (ex. <code class="codehilite"><span class="n">dplyr</span></code>, <code class="codehilite"><span class="n">ggplot</span></code>,
etc.).</p>
<h3 id="31-gather">3.1. <code class="codehilite"><span class="n">gather</span><span class="p">()</span></code><a class="headerlink" href="#31-gather" title="Permanent link">&para;</a></h3>
<p><code class="codehilite"><span class="n">gather</span><span class="p">()</span></code> é utilizado para derreter/agrupar as colunas dos nossos
bancos. Pensando no exemplo anterior, essa função transforma o nosso
banco <em>wide</em> em um banco <em>long</em>.</p>
<div class="codehilite"><pre><span></span><span class="n">tabela_wide</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">País</span> <span class="p">,</span> <span class="o">~</span><span class="n">`2015`</span><span class="p">,</span> <span class="o">~</span><span class="n">`2016`</span><span class="p">,</span>
  <span class="s">&#39;Brasil&#39;</span> <span class="p">,</span> <span class="m">10.2</span> <span class="p">,</span> <span class="m">11.2</span><span class="p">,</span>
  <span class="s">&#39;China&#39;</span> <span class="p">,</span> <span class="m">14.3</span> <span class="p">,</span> <span class="m">18.4</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">tabela_wide</span>
</pre></div>


<p><code class="codehilite"><span class="n">gather</span><span class="p">()</span></code> recebe (1) o banco de dados, (2) o nome da variável (<code class="codehilite"><span class="k">key</span></code>)
que está como nome das colunas, (3) o nome da variável que está nas
células, (4) os nomes das colunas em que iremos realizar a operação
<strong>sem aspas</strong>.</p>
<div class="codehilite"><pre><span></span><span class="n">gather</span><span class="p">(</span><span class="o">&lt;</span><span class="n">banco</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="k">key</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">VAR1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">VAR2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">VARn</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>Dado isso, qual código devemos utilizar para realizar a transformação em
<code class="codehilite"><span class="n">tabela_wide</span></code>.</p>
<p><br/></p>
<ul>
<li><strong>Resposta</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">gather</span><span class="p">(</span><span class="n">tabela_wide</span><span class="p">,</span> <span class="k">key</span> <span class="o">=</span> <span class="s1">&#39;ano&#39;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;mortalidade&#39;</span> <span class="p">,</span><span class="o">`</span><span class="mi">2015</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="mi">2016</span><span class="o">`</span><span class="p">)</span>
</pre></div>


<h4 id="311-aplicando">3.1.1. Aplicando<a class="headerlink" href="#311-aplicando" title="Permanent link">&para;</a></h4>
<p>Como o nosso banco não possui esse problema, vamos fingir que decidimos
realizar uma segunda coleta de dados e queremos avaliar a evolução de
doenças cardíacas nossos pacientes após 1 ano. Porém, o seu estagiário
era preguiçoso e ao invés de estruturar o seu banco no formato <code class="codehilite"><span class="n">tidy</span></code>
ele (1) alterou o nome da coluna <code class="codehilite"><span class="n">target</span></code> para <code class="codehilite"><span class="n">target2018</span></code> e (2) criou
uma coluna <code class="codehilite"><span class="n">target2019</span></code> para os novos resultados</p>
<div class="codehilite"><pre><span></span><span class="n">ex3_1_1</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">ID</span><span class="p">,</span> <span class="o">~</span><span class="n">target2018</span><span class="p">,</span> <span class="o">~</span><span class="n">target2019</span><span class="p">,</span>
  <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
  <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span>
  <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span>
  <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span>
  <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ex3_1_1</span>
</pre></div>


<p>Qual código seria utilizado para deixar essa tabela <code class="codehilite"><span class="n">tidy</span></code>?</p>
<h3 id="32-spread">3.2. <code class="codehilite"><span class="n">spread</span><span class="p">()</span></code><a class="headerlink" href="#32-spread" title="Permanent link">&para;</a></h3>
<p><code class="codehilite"><span class="n">spread</span><span class="p">()</span></code> realiza a operação inversa do <code class="codehilite"><span class="n">gather</span><span class="p">()</span></code>. Ela estica os
nossos dados horizontalmente. Mas isso não acaba com o formato <code class="codehilite"><span class="n">tidy</span></code> do
nosso banco? Sim, mas lembre-se que apenas estruturamos os nossos dados
de acordo com os princípios do <code class="codehilite"><span class="n">tidy</span> <span class="k">data</span></code> porque a maior parte das
funções esperam esse tipo de estrutura! Isso não significa que ao
apresentar uma tabela para alguém ela deva estar no formato <code class="codehilite"><span class="n">tidy</span></code>. Ela
simplesmente deve estar na maneira mais intuitiva de ler.</p>
<div class="codehilite"><pre><span></span><span class="n">tabela_long</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">pais</span><span class="p">,</span> <span class="o">~</span><span class="n">ano</span><span class="p">,</span> <span class="o">~</span><span class="n">mortalidade</span><span class="p">,</span>
  <span class="s">&#39;Brasil&#39;</span> <span class="p">,</span> <span class="m">2015</span> <span class="p">,</span> <span class="m">10.2</span><span class="p">,</span>
  <span class="s">&#39;Brasil&#39;</span> <span class="p">,</span> <span class="m">2016</span> <span class="p">,</span> <span class="m">11.2</span><span class="p">,</span>
  <span class="s">&#39;China&#39;</span> <span class="p">,</span> <span class="m">2015</span> <span class="p">,</span> <span class="m">14.3</span><span class="p">,</span>
  <span class="s">&#39;China&#39;</span> <span class="p">,</span> <span class="m">2016</span> <span class="p">,</span> <span class="m">18.4</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">tabela_long</span>
</pre></div>


<p>A função <code class="codehilite"><span class="n">spread</span><span class="p">()</span></code> recebe os seguintes parâmetros: (1) Primeiro,
precisamos fornecer o banco de dados; (2) em segundo lugar, o nome da
variável cujo os valores serão dispostos como colunas; (3) por fim, a
variável que fornecerá os valores para as células. São os mesmos
parâmetros da função <code class="codehilite"><span class="n">gather</span><span class="p">()</span></code>!</p>
<div class="codehilite"><pre><span></span><span class="n">spread</span><span class="p">(</span><span class="o">&lt;</span><span class="n">banco</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="k">key</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>Como você faria para deixar o país na linha e os anos no cabeçalho com
os valores de mortalidade ocupando o centro da tabela?</p>
<p><br/></p>
<p><br/></p>
<ul>
<li><strong>Resposta</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">spread</span><span class="p">(</span><span class="n">tabela_long</span><span class="p">,</span> <span class="n">ano</span><span class="p">,</span> <span class="n">pib</span><span class="p">)</span>
</pre></div>


<h4 id="321-aplicando-no-nosso-banco">3.2.1. Aplicando no nosso banco<a class="headerlink" href="#321-aplicando-no-nosso-banco" title="Permanent link">&para;</a></h4>
<p>Por favor, execute o código abaixo. Não se preocupe em entender como ele
funciona. Nós veremos isso na próxima aula. Tenha apenas em mente que
ele retorna a quantidade de observações diagnosticadas com doença
cardíaca entre homens e mulheres.</p>
<div class="codehilite"><pre><span></span><span class="n">ex3_1_1</span> <span class="o">&lt;-</span> <span class="n">banco</span> <span class="o">%&gt;%</span> 
  <span class="nf">group_by</span><span class="p">(</span><span class="n">sex</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">summarise</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="nf">n</span><span class="p">())</span>

<span class="n">ex3_1_1</span>
</pre></div>


<p>Será que essa é a melhor maneira de visualizar esse resultado? Ainda que
você consiga extrair alguma informação, imagine se tivéssemos 3 ou 4
categorias em cada variável. Provavelmente, não seria tão fácil. Uma
maneira elegante de resolver esse problema é com a função <code class="codehilite"><span class="n">spread</span><span class="p">()</span></code>.
Como você aplicaria essa função para que a variável <code class="codehilite"><span class="n">target</span></code> fique no
cabeçalho?</p>
<h2 id="4-exercicios-parte-2">4. Exercícios - Parte 2<a class="headerlink" href="#4-exercicios-parte-2" title="Permanent link">&para;</a></h2>
<h3 id="41-exercicio-spread">4.1. Exercício - <code class="codehilite"><span class="n">spread</span><span class="p">()</span></code><a class="headerlink" href="#41-exercicio-spread" title="Permanent link">&para;</a></h3>
<p>Apresente a tabela abaixo de tal maneira que as UFs fiquem nas linhas e
o nível de escolaridade esteja distribuído pelas colunas.</p>
<ul>
<li><strong>Item I</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">ex_4_1_1</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">UF</span><span class="p">,</span> <span class="o">~</span><span class="n">mes</span><span class="p">,</span> <span class="o">~</span><span class="n">nivel_escolaridade</span><span class="p">,</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="s">&#39;Jan&#39;</span><span class="p">,</span> <span class="m">20.2</span><span class="p">,</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="s">&#39;Fev&#39;</span><span class="p">,</span> <span class="m">29.2</span><span class="p">,</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="s">&#39;Mar&#39;</span><span class="p">,</span> <span class="m">12.3</span><span class="p">,</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="s">&#39;Abr&#39;</span><span class="p">,</span> <span class="m">14.3</span><span class="p">,</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="s">&#39;Jan&#39;</span><span class="p">,</span> <span class="m">28.2</span><span class="p">,</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="s">&#39;Fev&#39;</span><span class="p">,</span> <span class="m">19.2</span><span class="p">,</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="s">&#39;Mar&#39;</span><span class="p">,</span> <span class="m">9.3</span><span class="p">,</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="s">&#39;Abr&#39;</span><span class="p">,</span> <span class="m">30.3</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<ul>
<li><strong>Item II</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">ex_4_1_2</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">pais</span><span class="p">,</span> <span class="o">~</span><span class="n">ano</span><span class="p">,</span> <span class="o">~</span><span class="n">venda</span><span class="p">,</span>
  <span class="s">&#39;Brasil&#39;</span><span class="p">,</span> <span class="m">2014</span><span class="p">,</span> <span class="m">20.2</span><span class="p">,</span>
  <span class="s">&#39;Brasil&#39;</span><span class="p">,</span> <span class="m">2015</span><span class="p">,</span> <span class="m">29.2</span><span class="p">,</span>
  <span class="s">&#39;Brasil&#39;</span><span class="p">,</span> <span class="m">2016</span><span class="p">,</span> <span class="m">12.3</span><span class="p">,</span>
  <span class="s">&#39;Brasil&#39;</span><span class="p">,</span> <span class="m">2017</span><span class="p">,</span> <span class="m">14.3</span><span class="p">,</span>
  <span class="s">&#39;Colômbia&#39;</span><span class="p">,</span> <span class="m">2014</span><span class="p">,</span> <span class="m">28.2</span><span class="p">,</span>
  <span class="s">&#39;Colômbia&#39;</span><span class="p">,</span> <span class="m">2015</span><span class="p">,</span> <span class="m">19.2</span><span class="p">,</span>
  <span class="s">&#39;Colômbia&#39;</span><span class="p">,</span> <span class="m">2016</span><span class="p">,</span> <span class="m">9.3</span><span class="p">,</span>
  <span class="s">&#39;Colômbia&#39;</span><span class="p">,</span> <span class="m">2017</span><span class="p">,</span> <span class="m">30.3</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<h3 id="42-exercicio-gather">4.2. Exercício - <code class="codehilite"><span class="n">gather</span><span class="p">()</span></code><a class="headerlink" href="#42-exercicio-gather" title="Permanent link">&para;</a></h3>
<p>Transforme as próximas tabelas em <code class="codehilite"><span class="n">tidy</span> <span class="k">data</span></code>.</p>
<ul>
<li><strong>Item I</strong>: Escolaridade:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">ex_4_2_1</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="p">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">pais</span><span class="p">,</span> <span class="o">~</span><span class="ss">`Jan`</span><span class="p">,</span> <span class="o">~</span><span class="ss">`Fev`</span><span class="p">,</span>
  <span class="s1">&#39;China&#39;</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">20</span><span class="p">.</span><span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;EUA&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mi">2</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span>
  <span class="s1">&#39;França&#39;</span><span class="p">,</span> <span class="mi">72</span><span class="p">.</span><span class="mi">2</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span>
  <span class="s1">&#39;Chile&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">.</span><span class="mi">2</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span>
  <span class="s1">&#39;Japão&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<ul>
<li><strong>Item II</strong>: Mortes por arma de fogo</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">ex_4_2_2</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">UF</span><span class="p">,</span> <span class="o">~</span><span class="n">`2015`</span><span class="p">,</span> <span class="o">~</span><span class="n">`2016`</span><span class="p">,</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="m">92</span><span class="p">,</span> <span class="m">20.2</span><span class="p">,</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="m">10.2</span><span class="p">,</span> <span class="m">42</span><span class="p">,</span>
  <span class="s">&#39;RS&#39;</span><span class="p">,</span> <span class="m">72.2</span><span class="p">,</span> <span class="m">26</span><span class="p">,</span>
  <span class="s">&#39;CO&#39;</span><span class="p">,</span> <span class="m">80.2</span><span class="p">,</span> <span class="m">90</span><span class="p">,</span>
  <span class="s">&#39;PE&#39;</span><span class="p">,</span> <span class="m">19.1</span><span class="p">,</span> <span class="m">25</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<h2 id="4-dplyr">4. <code class="codehilite"><span class="n">dplyr</span></code><a class="headerlink" href="#4-dplyr" title="Permanent link">&para;</a></h2>
<p>Dentre os pacotes mais importantes do <code class="codehilite"><span class="n">tidyverse</span></code>, o <code class="codehilite"><span class="n">dplyr</span></code> se destaca.
Ele traz uma biblioteca pode rasa de funções que nos permitem
transformar dados. Essa é a tarefa que você provavelmente passará mais
tempo fazendo já que nem sempre os dados estão limpos. Muitas vezes
teremos que criar variáveis ou extrair parte da informação presente em
uma antes de rodarmos um modelo.</p>
<p>Quais são os verbos do <code class="codehilite"><span class="n">dplyr</span></code>? Obviamente, o pacote é extenso e possui
uma quantidade razoável de funções, mas queremos que você se atente,
agora, a três funções: <code class="codehilite"><span class="k">select</span><span class="p">()</span></code>, <code class="codehilite"><span class="n">filter</span><span class="p">()</span></code>, <code class="codehilite"><span class="n">mutate</span><span class="p">()</span></code>.</p>
<h3 id="41-select">4.1. <code class="codehilite"><span class="k">select</span><span class="p">()</span></code><a class="headerlink" href="#41-select" title="Permanent link">&para;</a></h3>
<p>O <code class="codehilite"><span class="k">select</span><span class="p">()</span></code> é capaz de selecionar colunas específicas do nosso banco de
dados. O uso dela é bem simples e precisamos apenas escrever as
variáveis que desejamos selecionar <strong>sem aspas</strong>. Caso você deseje
<strong>excluir</strong> uma variável, acrescente um <code class="codehilite"><span class="o">-</span></code> antes do no nome. Assim como
nas funções do <code class="codehilite"><span class="n">tidyr</span></code> (<code class="codehilite"><span class="n">gather</span><span class="p">()</span></code>, <code class="codehilite"><span class="n">spread</span><span class="p">()</span></code>, etc.), informamos o
banco de dados no primeiro parâmetro de nossa função.</p>
<div class="codehilite"><pre><span></span><span class="k">select</span><span class="p">(</span><span class="o">&lt;</span><span class="n">banco</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">VAR1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">VAR2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">-&lt;</span><span class="n">VAR3</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>Repare que antes de <code class="codehilite"><span class="o">&lt;</span><span class="n">VAR3</span><span class="o">&gt;</span></code> nós adicionamos um <code class="codehilite"><span class="o">-</span></code>. Isso significa que
queremos excluir essa coluna no banco</p>
<p>Imagine que após muita pesquisa, você tenha descoberto que a melhor
variável para <em>prever</em> doenças cardíacas seja idade (<code class="codehilite"><span class="n">age</span></code>). Como você
faria para selecionar apenas <code class="codehilite"><span class="n">target</span></code> e <code class="codehilite"><span class="n">age</span></code>?</p>
<p><br/></p>
<p><br/></p>
<ul>
<li><strong>Resposta</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="k">select</span><span class="p">(</span><span class="n">banco</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
</pre></div>


<p>Agora, imagine que tenha sido provado que sexo é irrelevante. Como você
faria para excluir essa variável do banco?</p>
<p><br/></p>
<p><br/></p>
<div class="codehilite"><pre><span></span><span class="k">select</span><span class="p">(</span><span class="n">banco</span><span class="p">,</span> <span class="o">-</span><span class="n">sex</span><span class="p">)</span>
</pre></div>


<h3 id="42-filter">4.2. <code class="codehilite"><span class="n">filter</span><span class="p">()</span></code><a class="headerlink" href="#42-filter" title="Permanent link">&para;</a></h3>
<p>Novamente, o nome da função já entrega o objetivo dela. <code class="codehilite"><span class="n">filter</span><span class="p">()</span></code>
filtra (dãã) as <strong>observações</strong> da nossa tabela por meio de
<code class="codehilite"><span class="n">operações</span> <span class="n">booleanas</span></code>.</p>
<div class="admonition question">
<p class="admonition-title"> Operadores lógicos </p>
<p>Nós vimos na primeira aula que operadores lógicas são operações que retornam 
necessariamente apenas dois resultados: verdadeiro e falso. A partir de agora, começaremos a
utilizar eles cada vez mais. Então, se não estiver se sentindo confortável com o tema, volte
para a primeira aula e reveja os exemplos.</p>
</div>
<p>Como ela funciona? Simples, você apenas precisa realizar um teste de
verdadeiro e falso a partir de uma variável do seu banco.</p>
<div class="codehilite"><pre><span></span><span class="n">filter</span><span class="p">(</span><span class="o">&lt;</span><span class="n">banco</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">operacao_booleana</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>Repare no banco abaixo. Como você faria para selecionar as observações
de <code class="codehilite"><span class="n">SP</span></code>?</p>
<div class="codehilite"><pre><span></span><span class="n">exemplo_filter</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">UF</span><span class="p">,</span> <span class="o">~</span><span class="n">`2015`</span><span class="p">,</span> <span class="o">~</span><span class="n">`2016`</span><span class="p">,</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="m">92</span><span class="p">,</span> <span class="m">20.2</span><span class="p">,</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="m">10.2</span><span class="p">,</span> <span class="m">42</span><span class="p">,</span>
  <span class="s">&#39;RS&#39;</span><span class="p">,</span> <span class="m">72.2</span><span class="p">,</span> <span class="m">26</span><span class="p">,</span>
  <span class="s">&#39;CO&#39;</span><span class="p">,</span> <span class="m">80.2</span><span class="p">,</span> <span class="m">90</span><span class="p">,</span>
  <span class="s">&#39;PE&#39;</span><span class="p">,</span> <span class="m">19.1</span><span class="p">,</span> <span class="m">25</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">exemplo_filter</span>
</pre></div>


<p>Qual o operador lógico que testa igualdade? Se você pensou no <code class="codehilite"><span class="o">==</span></code>,
acertou! <img alt="🎉" class="emojione" src="https://cdn.jsdelivr.net/emojione/assets/svg/1f389.svg" title=":tada:" /> Agora, só precisamos colocá-lo dentro do <code class="codehilite"><span class="n">filter</span><span class="p">()</span></code> e
deixar que mágica aconteça.</p>
<p><br/></p>
<p><br/></p>
<ul>
<li><strong>Resposta</strong>:</li>
</ul>
<!-- -->

<div class="codehilite"><pre><span></span><span class="n">filter</span><span class="p">(</span><span class="n">exemplo_filter</span><span class="p">,</span> <span class="n">UF</span> <span class="o">==</span> <span class="s1">&#39;SP&#39;</span><span class="p">)</span>
</pre></div>


<h3 id="43-mutate">4.3. <code class="codehilite"><span class="n">mutate</span><span class="p">()</span></code><a class="headerlink" href="#43-mutate" title="Permanent link">&para;</a></h3>
<p><code class="codehilite"><span class="n">mutate</span><span class="p">()</span></code> nos permite transformar e criar colunas em nossa tabela de
maneira rápida e intuitiva. Repare na tabela abaixo.</p>
<div class="codehilite"><pre><span></span><span class="n">exemplo_mutate</span> <span class="o">&lt;-</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">UF</span><span class="p">,</span> <span class="o">~</span><span class="n">mes</span><span class="p">,</span> <span class="o">~</span><span class="n">total</span><span class="p">,</span> <span class="o">~</span><span class="n">homi</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="s">&#39;Jan&#39;</span><span class="p">,</span> <span class="m">20.2</span><span class="p">,</span> <span class="m">3</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="s">&#39;Fev&#39;</span><span class="p">,</span> <span class="m">29.2</span><span class="p">,</span> <span class="m">4</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="s">&#39;Mar&#39;</span><span class="p">,</span> <span class="m">12.3</span><span class="p">,</span> <span class="m">6</span>
  <span class="s">&#39;SP&#39;</span><span class="p">,</span> <span class="s">&#39;Abr&#39;</span><span class="p">,</span> <span class="m">14.3</span><span class="p">,</span> <span class="m">4</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="s">&#39;Jan&#39;</span><span class="p">,</span> <span class="m">28.2</span><span class="p">,</span> <span class="m">3</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="s">&#39;Fev&#39;</span><span class="p">,</span> <span class="m">19.2</span><span class="p">,</span> <span class="m">3</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="s">&#39;Mar&#39;</span><span class="p">,</span> <span class="m">9.3</span><span class="p">,</span> <span class="m">10</span>
  <span class="s">&#39;RJ&#39;</span><span class="p">,</span> <span class="s">&#39;Abr&#39;</span><span class="p">,</span> <span class="m">30.3</span><span class="p">,</span> <span class="m">20</span>
<span class="p">)</span>
</pre></div>


<p>Sento <code class="codehilite"><span class="n">total</span></code> o total de mortes registradas naquele mês e <code class="codehilite"><span class="n">homi</span></code> valor
absoluto de homicídios, é possível retirar a taxa de homicídios entre
todas as outras mortes realizando com a operação de divisão.</p>
<div class="codehilite"><pre><span></span><span class="n">mutate</span><span class="p">(</span><span class="o">&lt;</span><span class="n">banco</span><span class="o">&gt;</span><span class="p">,</span>
       <span class="o">&lt;</span><span class="n">variavel</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">operacao</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>Novamente, o banco de dados é fornecido como primeiro parâmetro. A
diferença é que dessa vez iremos fazer referências a variáveis
(<code class="codehilite"><span class="o">&lt;</span><span class="n">variavel</span><span class="o">&gt;</span></code>) dentro da função <code class="codehilite"><span class="n">mutate</span><span class="p">()</span></code> para alterá-las. Em
<code class="codehilite"><span class="o">&lt;</span><span class="n">operacoes</span><span class="o">&gt;</span></code>, você pode fazer referência a outras variáveis do banco ou
até mesmo de outros objetos para realizar a sua conta.</p>
<p>Você consegue imaginar como escrever o código acima para retirar a taxa
de homicídios?</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../01_introducao/" title="Introdução ao R" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Introdução ao R
              </span>
            </div>
          </a>
        
        
          <a href="../03_transformar/" title="Transformando Dados" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Próximo
                </span>
                Transformando Dados
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Programação para Humanidades
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/p4husp" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://facebook.com/p4husp" class="md-footer-social__link fa fa-facebook"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
          
            
              
              
                <script src="../assets/javascripts/lunr/lunr.pt.js"></script>
              
            
          
          
            <script src="../assets/javascripts/lunr/lunr.multi.js"></script>
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>